{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
    "parameters": {
      "location": {
        "type": "string"
      },
      "nsgName": {
        "type": "string"
      },
      "srcIPInboundNSG": {
        "type": "string"
      },
      "virtualNetworkAddressPrefix": {
        "type": "string"
      }
  },
  "variables":
  {
      "apiVersion": "2015-06-15"
  },
  "resources": [
    {
        "apiVersion": "[variables('apiVersion')]",
        "type": "Microsoft.Network/networkSecurityGroups",
        "name": "[parameters('nsgName')]",
        "location": "[parameters('location')]",
        "properties": {
            "securityRules": [{
                "name": "Allow-Outside-From-IP",
                "properties": {
                    "description": "Rule",
                    "protocol": "*",
                    "sourcePortRange": "*",
                    "destinationPortRange": "*",
                    "sourceAddressPrefix": "[parameters('srcIPInboundNSG')]",
                    "destinationAddressPrefix": "*",
                    "access": "Allow",
                    "priority": 100,
                    "direction": "Inbound"
                }
            }, {
                "name": "Allow-Intra",
                "properties": {
                    "description": "Allow intra network traffic",
                    "protocol": "*",
                    "sourcePortRange": "*",
                    "destinationPortRange": "*",
                    "sourceAddressPrefix": "[parameters('virtualNetworkAddressPrefix')]",
                    "destinationAddressPrefix": "*",
                    "access": "Allow",
                    "priority": 101,
                    "direction": "Inbound"
                }
            }, {
                "name": "Default-Deny",
                "properties": {
                    "description": "Default-Deny if we don't match Allow rule",
                    "protocol": "*",
                    "sourcePortRange": "*",
                    "destinationPortRange": "*",
                    "sourceAddressPrefix": "*",
                    "destinationAddressPrefix": "*",
                    "access": "Deny",
                    "priority": 200,
                    "direction": "Inbound"
                }
            }]
        }
    },
    jshah@ubu16:~$ ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:0d:3a:31:70:fc brd ff:ff:ff:ff:ff:ff
    inet 192.168.3.4/24 brd 192.168.3.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::20d:3aff:fe31:70fc/64 scope link 
       valid_lft forever preferred_lft forever
3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:0d:3a:32:4f:e2 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.7/24 brd 192.168.0.255 scope global eth1
       valid_lft forever preferred_lft forever
    inet6 fe80::20d:3aff:fe32:4fe2/64 scope link 
       valid_lft forever preferred_lft forever
jshah@ubu16:~$ ssh 192.168.1.6
The authenticity of host '192.168.1.6 (192.168.1.6)' can't be established.
ECDSA key fingerprint is SHA256:ZnDgxwk3OTkrf3/GoqXkWLQjZaYC+Gi+lkEK+JaJE8E.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '192.168.1.6' (ECDSA) to the list of known hosts.
jshah@192.168.1.6's password: 

jshah@ubu16:~$ clear



jshah@ubu16:~$ sudo apt-get updates
E: Invalid operation updates
jshah@ubu16:~$ sudo apt-get update
Hit:1 http://azure.archive.ubuntu.com/ubuntu xenial InRelease
Get:2 http://azure.archive.ubuntu.com/ubuntu xenial-updates InRelease [102 kB]                       
Get:3 http://azure.archive.ubuntu.com/ubuntu xenial-backports InRelease [102 kB]                               
Get:4 http://security.ubuntu.com/ubuntu xenial-security InRelease [102 kB]         
Fetched 306 kB in 0s (698 kB/s)                                     
Reading package lists... Done
jshah@ubu16:~$ 
jshah@ubu16:~$ sudo apt-get update --help
apt 1.2.24 (amd64)
Usage: apt-get [options] command
       apt-get [options] install|remove pkg1 [pkg2 ...]
       apt-get [options] source pkg1 [pkg2 ...]

apt-get is a command line interface for retrieval of packages
and information about them from authenticated sources and
for installation, upgrade and removal of packages together
with their dependencies.

Most used commands:
  update - Retrieve new lists of packages
  upgrade - Perform an upgrade
  install - Install new packages (pkg is libc6 not libc6.deb)
  remove - Remove packages
  purge - Remove packages and config files
  autoremove - Remove automatically all unused packages
  dist-upgrade - Distribution upgrade, see apt-get(8)
  dselect-upgrade - Follow dselect selections
  build-dep - Configure build-dependencies for source packages
  clean - Erase downloaded archive files
  autoclean - Erase old downloaded archive files
  check - Verify that there are no broken dependencies
  source - Download source archives
  download - Download the binary package into the current directory
  changelog - Download and display the changelog for the given package

See apt-get(8) for more information about the available commands.
Configuration options and syntax is detailed in apt.conf(5).
Information about how to configure sources can be found in sources.list(5).
Package and version choices can be expressed via apt_preferences(5).
Security details are available in apt-secure(8).
                                        This APT has Super Cow Powers.
jshah@ubu16:~$ 
jshah@ubu16:~$ 
jshah@ubu16:~$ 
jshah@ubu16:~$ 
jshah@ubu16:~$ sudo apt-get update 
Hit:1 http://azure.archive.ubuntu.com/ubuntu xenial InRelease
Get:2 http://azure.archive.ubuntu.com/ubuntu xenial-updates InRelease [102 kB]
Get:3 http://azure.archive.ubuntu.com/ubuntu xenial-backports InRelease [102 kB]                                 
Hit:4 http://security.ubuntu.com/ubuntu xenial-security InRelease                                                
Fetched 204 kB in 0s (625 kB/s)
Reading package lists... Done
jshah@ubu16:~$ 
jshah@ubu16:~$ 
jshah@ubu16:~$ ssh 192.168.1.6
jshah@192.168.1.6's password: 
Welcome to Ubuntu 17.04 (GNU/Linux 4.10.0-32-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  Get cloud support with Ubuntu Advantage Cloud Guest:
    http://www.ubuntu.com/business/services/cloud

23 packages can be updated.
0 updates are security updates.


*** System restart required ***

The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

jshah@untrust-dmz-ubu17:~$ wget www.bing.com
--2017-09-21 06:19:32--  http://www.bing.com/
Resolving www.bing.com (www.bing.com)... 13.107.21.200, 204.79.197.200
Connecting to www.bing.com (www.bing.com)|13.107.21.200|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 123644 (121K) [text/html]
Saving to: ‘index.html’

index.html                          100%[================================================================>] 120.75K  --.-KB/s    in 0.09s   

2017-09-21 06:19:32 (1.36 MB/s) - ‘index.html’ saved [123644/123644]

jshah@untrust-dmz-ubu17:~$ 
jshah@untrust-dmz-ubu17:~$ 
jshah@untrust-dmz-ubu17:~$ wget www.bing.com
--2017-09-21 06:21:32--  http://www.bing.com/
Resolving www.bing.com (www.bing.com)... 204.79.197.200, 13.107.21.200
Connecting to www.bing.com (www.bing.com)|204.79.197.200|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 123630 (121K) [text/html]
Saving to: ‘index.html.1’

index.html.1                        100%[================================================================>] 120.73K  --.-KB/s    in 0.07s   

2017-09-21 06:21:32 (1.79 MB/s) - ‘index.html.1’ saved [123630/123630]

jshah@untrust-dmz-ubu17:~$ 
jshah@untrust-dmz-ubu17:~$ 
jshah@untrust-dmz-ubu17:~$ 
jshah@untrust-dmz-ubu17:~$ 
jshah@untrust-dmz-ubu17:~$ sudo apt-get update
Hit:1 http://azure.archive.ubuntu.com/ubuntu zesty InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu zesty-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu zesty-backports InRelease
Get:4 http://security.ubuntu.com/ubuntu zesty-security InRelease [89.2 kB]       
Fetched 89.2 kB in 0s (145 kB/s)    
Reading package lists... Done
jshah@untrust-dmz-ubu17:~$ packet_write_wait: Connection to 40.78.69.23 port 22: Broken pipe
PANMT594F6T6HQ:.ssh jshah$ uptime
20:49  up 31 days,  8:28, 3 users, load averages: 3.06 3.42 3.82
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ ab
ab: wrong number of arguments
Usage: ab [options] [http[s]://]hostname[:port]/path
Options are:
    -n requests     Number of requests to perform
    -c concurrency  Number of multiple requests to make at a time
    -t timelimit    Seconds to max. to spend on benchmarking
                    This implies -n 50000
    -s timeout      Seconds to max. wait for each response
                    Default is 30 seconds
    -b windowsize   Size of TCP send/receive buffer, in bytes
    -B address      Address to bind to when making outgoing connections
    -p postfile     File containing data to POST. Remember also to set -T
    -u putfile      File containing data to PUT. Remember also to set -T
    -T content-type Content-type header to use for POST/PUT data, eg.
                    'application/x-www-form-urlencoded'
                    Default is 'text/plain'
    -v verbosity    How much troubleshooting info to print
    -w              Print out results in HTML tables
    -i              Use HEAD instead of GET
    -x attributes   String to insert as table attributes
    -y attributes   String to insert as tr attributes
    -z attributes   String to insert as td or th attributes
    -C attribute    Add cookie, eg. 'Apache=1234'. (repeatable)
    -H attribute    Add Arbitrary header line, eg. 'Accept-Encoding: gzip'
                    Inserted after all normal header lines. (repeatable)
    -A attribute    Add Basic WWW Authentication, the attributes
                    are a colon separated username and password.
    -P attribute    Add Basic Proxy Authentication, the attributes
                    are a colon separated username and password.
    -X proxy:port   Proxyserver and port number to use
    -V              Print version number and exit
    -k              Use HTTP KeepAlive feature
    -d              Do not show percentiles served table.
    -S              Do not show confidence estimators and warnings.
    -q              Do not show progress when doing more than 150 requests
    -l              Accept variable document length (use this for dynamic pages)
    -g filename     Output collected data to gnuplot format file.
    -e filename     Output CSV file with percentages served
    -r              Don't exit on socket receive errors.
    -m method       Method name
    -h              Display usage information (this message)
    -I              Disable TLS Server Name Indication (SNI) extension
    -Z ciphersuite  Specify SSL/TLS cipher suite (See openssl ciphers)
    -f protocol     Specify SSL/TLS protocol
                    (SSL3, TLS1, TLS1.1, TLS1.2 or ALL)
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ ab -n 100 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient).....done


Server Software:        Apache/2.4.18
Server Hostname:        13.93.203.139
Server Port:            80

Document Path:          /
Document Length:        11315 bytes

Concurrency Level:      1
Time taken for tests:   6.764 seconds
Complete requests:      100
Failed requests:        25
   (Connect: 0, Receive: 0, Length: 25, Exceptions: 0)
Total transferred:      1161679 bytes
HTML transferred:       1131175 bytes
Requests per second:    14.78 [#/sec] (mean)
Time per request:       67.645 [ms] (mean)
Time per request:       67.645 [ms] (mean, across all concurrent requests)
Transfer rate:          167.71 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       16   27  27.9     21     251
Processing:    25   41  48.3     30     347
Waiting:       23   40  48.4     29     346
Total:         42   68  67.0     52     598

Percentage of the requests served within a certain time (ms)
  50%     52
  66%     54
  75%     57
  80%     60
  90%     79
  95%    170
  98%    360
  99%    598
 100%    598 (longest request)
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ ab -n 1000 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Completed 1000 requests
Finished 1000 requests


Server Software:        Apache/2.4.18
Server Hostname:        13.93.203.139
Server Port:            80

Document Path:          /
Document Length:        11302 bytes

Concurrency Level:      1
Time taken for tests:   99.886 seconds
Complete requests:      1000
Failed requests:        365
   (Connect: 0, Receive: 0, Length: 365, Exceptions: 0)
Total transferred:      11611761 bytes
HTML transferred:       11306745 bytes
Requests per second:    10.01 [#/sec] (mean)
Time per request:       99.886 [ms] (mean)
Time per request:       99.886 [ms] (mean, across all concurrent requests)
Transfer rate:          113.53 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       16   41  52.7     21    1020
Processing:    24   59  69.0     31    1145
Waiting:       23   57  64.8     30     847
Total:         42  100  97.4     54    1288

Percentage of the requests served within a certain time (ms)
  50%     54
  66%     70
  75%    156
  80%    171
  90%    192
  95%    291
  98%    344
  99%    471
 100%   1288 (longest request)
PANMT594F6T6HQ:.ssh jshah$ ab -n 500 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Finished 500 requests


Server Software:        Apache/2.4.18
Server Hostname:        13.93.203.139
Server Port:            80

Document Path:          /
Document Length:        11315 bytes

Concurrency Level:      1
Time taken for tests:   47.200 seconds
Complete requests:      500
Failed requests:        170
   (Connect: 0, Receive: 0, Length: 170, Exceptions: 0)
Total transferred:      5807798 bytes
HTML transferred:       5655290 bytes
Requests per second:    10.59 [#/sec] (mean)
Time per request:       94.401 [ms] (mean)
Time per request:       94.401 [ms] (mean, across all concurrent requests)
Transfer rate:          120.16 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       16   40  42.9     22     258
Processing:    24   54  60.4     31     675
Waiting:       23   53  60.4     30     675
Total:         42   94  78.4     55     696

Percentage of the requests served within a certain time (ms)
  50%     55
  66%     68
  75%    156
  80%    170
  90%    178
  95%    271
  98%    311
  99%    431
 100%    696 (longest request)
PANMT594F6T6HQ:.ssh jshah$ ab -n 5000 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient)
apr_pollset_poll: The timeout specified has expired (70007)
Total of 92 requests completed
PANMT594F6T6HQ:.ssh jshah$ ab -n 5000 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient)


^C

Server Software:        Apache/2.4.18
Server Hostname:        13.93.203.139
Server Port:            80

Document Path:          /
Document Length:        11302 bytes

Concurrency Level:      1
Time taken for tests:   284.312 seconds
Complete requests:      99
Failed requests:        63
   (Connect: 0, Receive: 0, Length: 63, Exceptions: 0)
Total transferred:      1149978 bytes
HTML transferred:       1119717 bytes
Requests per second:    0.35 [#/sec] (mean)
Time per request:       2871.843 [ms] (mean)
Time per request:       2871.843 [ms] (mean, across all concurrent requests)
Transfer rate:          3.95 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      342  437 227.0    352    1704
Processing:   352 2368 3001.2    453    8539
Waiting:      350 2362 2999.1    452    8539
Total:        700 2805 2992.7    832    8884

Percentage of the requests served within a certain time (ms)
  50%    829
  66%   1641
  75%   7180
  80%   7195
  90%   7349
  95%   7607
  98%   8272
  99%   8884
 100%   8884 (longest request)
PANMT594F6T6HQ:.ssh jshah$ ab -n 1000 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient)
Completed 100 requests

Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
apr_pollset_poll: The timeout specified has expired (70007)
Total of 760 requests completed
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ ab -n 1000 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Completed 1000 requests
Finished 1000 requests


Server Software:        Apache/2.4.18
Server Hostname:        13.93.203.139
Server Port:            80

Document Path:          /
Document Length:        11302 bytes

Concurrency Level:      1
Time taken for tests:   87.542 seconds
Complete requests:      1000
Failed requests:        500
   (Connect: 0, Receive: 0, Length: 500, Exceptions: 0)
Total transferred:      11613516 bytes
HTML transferred:       11308500 bytes
Requests per second:    11.42 [#/sec] (mean)
Time per request:       87.542 [ms] (mean)
Time per request:       87.542 [ms] (mean, across all concurrent requests)
Transfer rate:          129.55 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       16   34  47.7     21    1033
Processing:    24   54  56.7     31     611
Waiting:       22   52  56.6     29     610
Total:         41   87  77.8     52    1103

Percentage of the requests served within a certain time (ms)
  50%     52
  66%     57
  75%     84
  80%    169
  90%    174
  95%    200
  98%    299
  99%    304
 100%   1103 (longest request)
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ ab -n 1000 http://13.93.203.139/
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ 
PANMT594F6T6HQ:.ssh jshah$ ab -n 1000 http://13.93.203.139/
This is ApacheBench, Version 2.3 <$Revision: 1757674 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 13.93.203.139 (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Completed 1000 requests
Finished 1000 requests


Server Software:        Apache/2.4.18
Server Hostname:        13.93.203.139
Server Port:            80

Document Path:          /
Document Length:        11315 bytes

Concurrency Level:      1
Time taken for tests:   183.704 seconds
Complete requests:      1000
Failed requests:        435
   (Connect: 0, Receive: 0, Length: 435, Exceptions: 0)
Total transferred:      11614377 bytes
HTML transferred:       11309345 bytes
Requests per second:    5.44 [#/sec] (mean)
Time per request:       183.704 [ms] (mean)
Time per request:       183.704 [ms] (mean, across all concurrent requests)
Transfer rate:          61.74 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       16   79 151.3     28    3131
Processing:    24  105 158.5     38    1455
Waiting:       23   91 109.3     36    1425
Total:         42  184 243.0    102    3377

Percentage of the requests served within a certain time (ms)
  50%    102
  66%    196
  75%    243
  80%    276
  90%    342
  95%    470
  98%    850
  99%   1219
 100%   3377 (longest request)
PANMT594F6T6HQ:.ssh jshah$ cd
PANMT594F6T6HQ:~ jshah$ cd Downloads/
PANMT594F6T6HQ:Downloads jshah$ cd PAN-master-2
PANMT594F6T6HQ:PAN-master-2 jshah$ ls
Deploying VM-Series and Load Balancing on Azure.docx	deployBackend.json
README.md						deployFirewall.json
VMSeries Firewall Diagrams.vsdx				deployLoadBalancer.json
archdiagram.png						deployNsg.json
azureDeploy.ps1						deployStorage.json
azureDeployApp.json					deployVm-password-bs-no.json
azureDeployApp.parameters.json				deployVm-password-bs-yes.json
azureDeployInfra.json					deployVnet.json
azureDeployInfra.parameters.json
PANMT594F6T6HQ:PAN-master-2 jshah$ cd ..
PANMT594F6T6HQ:Downloads jshah$ cd PAN-HAPorts
PANMT594F6T6HQ:PAN-HAPorts jshah$ ls
PAN-deployfirewall.json	PAN-ilb.json		PAN-nsg.json		PAN-vnet.json
PANMT594F6T6HQ:PAN-HAPorts jshah$ grep 2017-08-01 *
PAN-deployfirewall.json:			"apiVersion": "2017-08-01",
PAN-ilb.json:			"apiVersion": "2017-08-01",
PANMT594F6T6HQ:PAN-HAPorts jshah$ vi PAN-deployfirewall.json 
PANMT594F6T6HQ:PAN-HAPorts jshah$ vi PAN-ilb.json 
PANMT594F6T6HQ:PAN-HAPorts jshah$ vi PAN-deployfirewall.json 
PANMT594F6T6HQ:PAN-HAPorts jshah$ vi PAN-ilb.json 
PANMT594F6T6HQ:PAN-HAPorts jshah$ grep Microsoft.Network/networkSecurityGroups *
PAN-nsg.json:        "type": "Microsoft.Network/networkSecurityGroups",
PAN-nsg.json:        "type": "Microsoft.Network/networkSecurityGroups",
PAN-vnet.json:						"id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('nsgName'))]"
PAN-vnet.json:					"id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('lbNsgName'))]"
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ clear

PANMT594F6T6HQ:PAN-HAPorts jshah$ grep Microsoft.Network/networkSecurityGroups *
PAN-nsg.json:        "type": "Microsoft.Network/networkSecurityGroups",
PAN-nsg.json:        "type": "Microsoft.Network/networkSecurityGroups",
PAN-vnet.json:						"id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('nsgName'))]"
PAN-vnet.json:					"id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('lbNsgName'))]"
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ clear





















PANMT594F6T6HQ:PAN-HAPorts jshah$ grep destinationPortRange": "0-65535 *
PANMT594F6T6HQ:PAN-HAPorts jshah$ grep destinationPortRange" *
> 
PANMT594F6T6HQ:PAN-HAPorts jshah$ grep destinationPortRange *
PAN-nsg.json:                    "destinationPortRange": "*",
PAN-nsg.json:                    "destinationPortRange": "*",
PAN-nsg.json:                    "destinationPortRange": "*",
PAN-nsg.json:                        "destinationPortRange": "0-65535",
PAN-nsg.json:                        "destinationPortRange": "0-65535",
PAN-nsg.json:                        "destinationPortRange": "0-65535",
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ 
PANMT594F6T6HQ:PAN-HAPorts jshah$ vi PAN-nsg.json 
















        {       
                "apiVersion": "[variables('apiVersion')]",
        "type": "Microsoft.Network/networkSecurityGroups",
        "name": "[variables('lbNsgName')]",
        "location": "[parameters('location')]",
        "properties": {
            "securityRules": [
                {   
                    "name": "unblock_all_tcp_rule",
                    "properties": {
                        "description": "unblock_all_tcp_rule",
                        "protocol": "Tcp", 
                        "sourcePortRange": "0-65535",
                        "destinationPortRange": "0-65535",
                        "sourceAddressPrefix": "0.0.0.0/0",
                        "destinationAddressPrefix": "0.0.0.0/0",
                        "access": "Allow",
                        "priority": 123,
                        "direction": "Inbound"
                    }
                },
                {   
                    "name": "unblock_all_tcp_outrule",
                    "properties": {
                        "description": "unblock_all_tcp_outrule",
                        "protocol": "Tcp", 
                        "sourcePortRange": "0-65535",
                        "destinationPortRange": "0-65535",
                        "sourceAddressPrefix": "0.0.0.0/0",
                        "destinationAddressPrefix": "0.0.0.0/0",
                        "access": "Allow",
                        "priority": 123,
                        "direction": "Outbound"
                    }
                },
                {   
                    "name": "unblock_all_udp_ports",
                    "properties": {
                        "description": "Unblock_all_udp_ports",
                        "protocol": "Udp", 
                        "sourcePortRange": "0-65535",
                        "destinationPortRange": "0-65535",
                        "sourceAddressPrefix": "0.0.0.0/0",
                        "destinationAddressPrefix": "0.0.0.0/0",
                        "access": "Allow",
                        "priority": 125,
                        "direction": "Inbound"
                    }
                }
            ]
        }
        }
  ],
  "outputs": {
  }
}
